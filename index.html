<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>春日台６丁目　神戸市バス・神姫バス時刻表</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #333;
            display: flex;
            justify-content: center; /* 中央寄せに戻す */
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }
        .container { /* main-content-wrapperからcontainerに戻す */
            background-color: #ffffff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            max-width: 90%;
            width: 700px;
            padding: 30px;
            text-align: center;
            border: 1px solid #e2e8f0;
        }
        h1 {
            color: #2c5282;
            font-size: 2.25rem; /* 36px */
            font-weight: 700;
            margin-bottom: 20px;
        }
        .schedule-selector {
            margin-bottom: 25px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .schedule-selector label {
            display: flex;
            align-items: center;
            font-size: 1.1rem; /* 18px */
            font-weight: 600;
            color: #2d3748;
            cursor: pointer;
        }
        .schedule-selector input[type="radio"] {
            margin-right: 8px;
            transform: scale(1.3); /* 大きめのラジオボタン */
            accent-color: #3182ce; /* ハイライトカラー */
        }
        /* time-jump-buttons 関連のスタイルを削除 */

        .bus-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-height: 500px; /* Limit height for scrollability */
            overflow-y: auto; /* Enable vertical scrolling */
            padding-right: 10px; /* Space for scrollbar */
        }
        .hour-group {
            background-color: #e0f2f7; /* Lighter blue for hour groups */
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid #a7d9ee;
            text-align: left;
            scroll-margin-top: 20px; /* Space from top when scrolled to */
        }
        .hour-title {
            font-size: 1.5rem; /* 24px */
            font-weight: 700;
            color: #1e3a8a; /* Dark blue */
            margin-bottom: 10px;
            border-bottom: 2px solid #a7d9ee;
            padding-bottom: 5px;
        }
        .bus-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background-color: #f7fafc;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease-in-out;
            margin-bottom: 8px; /* Space between bus items */
        }
        .bus-item:last-child {
            margin-bottom: 0; /* No margin for the last item in a group */
        }
        .bus-item.upcoming {
            background-color: #ebf8ff; /* Light blue */
            border-color: #63b3ed; /* Stronger blue */
            box-shadow: 0 4px 10px rgba(0, 128, 255, 0.15);
            transform: translateY(-3px);
            font-weight: 600;
        }
        .bus-item.past {
            opacity: 0.6;
            background-color: #edf2f7;
        }
        .bus-item-route {
            font-size: 1.125rem; /* 18px */
            font-weight: 700;
            color: #2d3748;
            width: 40%; /* Adjust width for better alignment */
            text-align: left;
        }
        .bus-item-time {
            font-size: 1.5rem; /* 24px */
            font-weight: 700;
            color: #3182ce;
            width: 60%; /* Adjust width for better alignment */
            text-align: right;
        }
        /* Scrollbar styles for better aesthetics */
        .bus-list::-webkit-scrollbar {
            width: 8px;
        }
        .bus-list::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .bus-list::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        .bus-list::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* Responsive adjustments */
        @media (max-width: 640px) { /* 768pxから640pxにMedia Queryのブレークポイントを戻す */
            .container {
                padding: 20px;
            }
            h1 {
                font-size: 1.75rem; /* 28px */
            }
            .schedule-selector {
                flex-direction: column;
                gap: 10px;
            }
            .schedule-selector label {
                font-size: 1rem;
            }
            /* time-jump-buttons 関連のレスポンシブスタイルを削除 */
            .hour-title {
                font-size: 1.25rem; /* 20px */
            }
            .bus-item {
                flex-direction: column;
                align-items: flex-start;
                padding: 10px 12px;
            }
            .bus-item-route, .bus-item-time {
                width: 100%;
                text-align: left;
                margin-bottom: 4px;
            }
            .bus-item-time {
                font-size: 1.2rem; /* 20px */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>春日台６丁目　神戸市営•神姫</h1>

        <div class="schedule-selector">
            <label>
                <input type="radio" name="scheduleType" value="weekday" id="weekdayRadio"> 平日
            </label>
            <label>
                <input type="radio" name="scheduleType" value="holiday" id="holidayRadio"> 土日祝
            </label>
        </div>

        <div id="bus-schedule" class="bus-list">
            <!-- Bus schedule will be inserted here by JavaScript -->
        </div>
    </div>

    <script>
        // バス時刻データ (系統番号と時刻)
        const weekdayBusData = [
            { route: '21', time: '5:54' }, { route: '22', time: '6:06' }, { route: '21', time: '6:23' },
            { route: '28', time: '6:34' }, { route: '28', time: '6:44' }, { route: '28', time: '6:54' },
            { route: '22', time: '7:02' }, { route: '21', time: '7:09' }, { route: '28', time: '7:17' },
            { route: '21', time: '7:21' }, { route: '22', time: '7:26' }, { route: '21', time: '7:33' },
            { route: '21', time: '7:45' }, { route: '28', time: '7:51' }, { route: '28', time: '7:59' },
            { route: '21', time: '8:05' }, { route: '28', time: '8:14' }, { route: '22', time: '8:19' },
            { route: '28', time: '8:29' }, { route: '22', time: '8:31' }, { route: '28', time: '8:44' },
            { route: '28', time: '9:00' }, { route: '22', time: '9:08' }, { route: '21', time: '9:23' },
            { route: '28', time: '9:40' }, { route: '22', time: '10:08' }, { route: '21', time: '10:23' },
            { route: '28', time: '10:40' }, { route: '22', time: '11:08' }, { route: '21', time: '11:23' },
            { route: '28', time: '11:40' }, { route: '22', time: '12:08' }, { route: '21', time: '12:23' },
            { route: '28', time: '12:40' }, { route: '21', time: '13:02' }, { route: '22', time: '13:08' },
            { route: '21', time: '13:23' }, { route: '28', time: '13:40' }, { route: '22', time: '14:08' },
            { route: '21', time: '14:23' }, { route: '28', time: '14:40' }, { route: '21', time: '14:53' },
            { route: '22', time: '15:08' }, { route: '21', time: '15:23' }, { route: '28', time: '15:40' },
            { route: '22', time: '15:48' }, { route: '28', time: '15:55' }, { route: '21', time: '16:02' },
            { route: '22', time: '16:07' }, { route: '28', time: '16:15' }, { route: '22', time: '16:22' },
            { route: '28', time: '16:30' }, { route: '22', time: '16:37' }, { route: '21', time: '16:42' },
            { route: '22', time: '16:52' }, { route: '28', time: '17:00' }, { route: '22', time: '17:07' },
            { route: '28', time: '17:15' }, { route: '22', time: '17:22' }, { route: '28', time: '17:30' },
            { route: '21', time: '17:37' }, { route: '28', time: '17:45' }, { route: '28', time: '18:00' },
            { route: '22', time: '18:10' }, { route: '21', time: '18:17' }, { route: '22', time: '18:40' },
            { route: '28', time: '18:57' }, { route: '21', time: '19:07' }, { route: '28', time: '19:17' },
            { route: '22', time: '19:43' }, { route: '28', time: '19:48' }, { route: '22', time: '20:01' },
            { route: '28', time: '20:13' }, { route: '21', time: '21:18' }, { route: '28', time: '21:54' }
        ];

        const holidayBusData = [
            { route: '21', time: '5:56' }, { route: '21', time: '6:15' }, { route: '28', time: '6:30' },
            { route: '28', time: '6:45' }, { route: '22', time: '7:08' }, { route: '21', time: '7:23' },
            { route: '22', time: '7:38' }, { route: '21', time: '7:48' }, { route: '22', time: '7:53' },
            { route: '22', time: '8:08' }, { route: '21', time: '8:14' }, { route: '22', time: '8:23' },
            { route: '22', time: '8:38' }, { route: '22', time: '8:53' }, { route: '22', time: '9:08' },
            { route: '21', time: '9:23' }, { route: '28', time: '9:40' }, { route: '22', time: '10:08' },
            { route: '21', time: '10:23' }, { route: '28', time: '10:40' }, { route: '22', time: '11:08' },
            { route: '21', time: '11:23' }, { route: '28', time: '11:40' }, { route: '22', time: '12:08' },
            { route: '21', time: '12:23' }, { route: '28', time: '12:40' }, { route: '21', time: '13:02' },
            { route: '22', time: '13:08' }, { route: '21', time: '13:23' }, { route: '28', time: '13:40' },
            { route: '22', time: '14:08' }, { route: '21', time: '14:23' }, { route: '28', time: '14:40' },
            { route: '22', time: '15:08' }, { route: '21', time: '15:23' }, { route: '28', time: '15:40' },
            { route: '21', time: '16:11' }, { route: '21', time: '16:41' }, { route: '22', time: '17:11' },
            { route: '22', time: '17:41' }, { route: '22', time: '18:11' }, { route: '22', time: '18:41' },
            { route: '22', time: '19:11' }, { route: '22', time: '19:41' }, { route: '28', time: '21:07' },
            { route: '22', time: '22:21' }
        ];

        let currentActiveSchedule = null; // 現在選択されている時刻表タイプ (weekday/holiday)

        // createTimeJumpButtons 関数を削除

        /**
         * 与えられた時刻データをもとに時刻表を生成・更新する関数
         * @param {Array<Object>} currentBusData - 表示するバスデータ（平日または土日祝）
         */
        function generateTimetable(currentBusData) {
            const now = new Date();
            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();

            const scheduleContainer = document.getElementById('bus-schedule');
            scheduleContainer.innerHTML = ''; // 既存の内容をクリア

            // バスデータを時間帯でグループ化
            const groupedBusData = {};
            currentBusData.forEach(bus => {
                const hour = parseInt(bus.time.split(':')[0]);
                if (!groupedBusData[hour]) {
                    groupedBusData[hour] = [];
                }
                groupedBusData[hour].push(bus);
            });

            let firstUpcomingBusElement = null;

            // グループ化されたデータをもとに時刻表を生成
            const sortedHours = Object.keys(groupedBusData).sort((a, b) => Number(a) - Number(b));

            sortedHours.forEach(hour => {
                const hourGroupDiv = document.createElement('div');
                hourGroupDiv.classList.add('hour-group');
                hourGroupDiv.id = `hour-group-${hour}`; // スクロールターゲット用のIDは維持（将来的な拡張のため）

                const hourTitle = document.createElement('h2');
                hourTitle.classList.add('hour-title');
                hourTitle.textContent = `${hour}時台`;
                hourGroupDiv.appendChild(hourTitle);

                groupedBusData[hour].forEach(bus => {
                    const [busHour, busMinute] = bus.time.split(':').map(Number);
                    const busTimeInMinutes = busHour * 60 + busMinute;
                    const currentTimeInMinutes = currentHour * 60 + currentMinute;

                    const busItem = document.createElement('div');
                    busItem.classList.add('bus-item');

                    // 現在時刻より後のバス、かつ最初のものにupcomingクラスを付与
                    if (busTimeInMinutes > currentTimeInMinutes && firstUpcomingBusElement === null) {
                        busItem.classList.add('upcoming');
                        firstUpcomingBusElement = busItem;
                    } else if (busTimeInMinutes <= currentTimeInMinutes) {
                        // 現在時刻より前のバス
                        busItem.classList.add('past');
                    }

                    const routeSpan = document.createElement('span');
                    routeSpan.classList.add('bus-item-route');
                    routeSpan.textContent = `${bus.route}系統`;

                    const timeSpan = document.createElement('span');
                    timeSpan.classList.add('bus-item-time');
                    timeSpan.textContent = bus.time;

                    busItem.appendChild(routeSpan);
                    busItem.appendChild(timeSpan);
                    hourGroupDiv.appendChild(busItem);
                });
                scheduleContainer.appendChild(hourGroupDiv);
            });

            // 最初の次のバスが見つかった場合、そこまでスクロール
            if (firstUpcomingBusElement) {
                setTimeout(() => {
                    firstUpcomingBusElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 100);
            } else if (currentBusData.length > 0) {
                // 次のバスがない場合（例：終バス後）
                const noUpcoming = document.createElement('div');
                noUpcoming.classList.add('bus-item', 'text-gray-600', 'justify-center');
                noUpcoming.textContent = '本日の運行は終了しました。';
                scheduleContainer.appendChild(noUpcoming);
            } else {
                 // バスデータが全くない場合
                const noData = document.createElement('div');
                noData.classList.add('bus-item', 'text-gray-600', 'justify-center');
                noData.textContent = '表示するバスデータがありません。';
                scheduleContainer.appendChild(noData);
            }
        }

        // 初期ロード時の処理
        window.onload = function() {
            // ラジオボタン要素を取得
            const weekdayRadio = document.getElementById('weekdayRadio');
            const holidayRadio = document.getElementById('holidayRadio');

            // 現在の曜日を判定し、デフォルトで表示する時刻表を選択
            const today = new Date();
            const dayOfWeek = today.getDay(); // 0:日, 1:月, ..., 6:土

            // 土曜日(6)または日曜日(0)の場合、土日祝をデフォルトに設定
            if (dayOfWeek === 0 || dayOfWeek === 6) {
                holidayRadio.checked = true;
                currentActiveSchedule = 'holiday';
                generateTimetable(holidayBusData);
            } else {
                weekdayRadio.checked = true;
                currentActiveSchedule = 'weekday';
                generateTimetable(weekdayBusData);
            }

            // ラジオボタンの変更イベントリスナーを設定
            weekdayRadio.addEventListener('change', () => {
                if (weekdayRadio.checked) {
                    currentActiveSchedule = 'weekday';
                    generateTimetable(weekdayBusData);
                }
            });

            holidayRadio.addEventListener('change', () => {
                if (holidayRadio.checked) {
                    currentActiveSchedule = 'holiday';
                    generateTimetable(holidayBusData);
                }
            });

            // 1分ごとに時刻表を更新
            setInterval(() => {
                if (currentActiveSchedule === 'weekday') {
                    generateTimetable(weekdayBusData);
                } else {
                    generateTimetable(holidayBusData);
                }
            }, 60 * 1000);
        };
    </script>
</body>
</html>